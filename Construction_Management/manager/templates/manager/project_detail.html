{% extends 'manager/layout.html' %}

{% block body %}
    <div class="project-detail">
        <h1>Project Details</h1>

        <h2>{{ project.name }}</h2>
        <p><strong>Location:</strong> {{ project.location }}</p>
        <p><strong>Status:</strong> {{ project.status }}</p>
        <p><strong>Start Date:</strong> {{ project.start_date }}</p>
        <p><strong>End Date:</strong> {{ project.end_date }}</p>

        <!-- You can add more project details here -->
        <h2>Materials Needed To Complete Project.</h2>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Material Name</th>
                    <th>Quantity Needed</th>
                    <th>Quantity Assigned</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for material_assignment in project.materials_used.all %}
                    <tr>
                        <td>{{ material_assignment.name.name }}</td>
                        <td>{{ material_assignment.quantity_needed }}</td>
                        <td>{{ material_assignment.quantity_assigned }}</td>
                        <td>
                            {% if material_assignment.quantity_assigned >= material_assignment.quantity_needed %}
                                Enough
                            {% else %}
                                Not Enough
                            {% endif %}
                        </td>
                    </tr>
                {%empty%}
                    <tr>
                        <td colspan="4">No Materalias Assigned yet</td>
                    </tr>    
                {% endfor %}
                {% if project.materials_used.count == 0 %}
                    <tr>
                        <td colspan="4">No materials needed for this project.</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    
        <a href="{% url 'assign_materials' project.id %}" class="btn btn-primary">Assign Materials</a>
       

        <a href="{% url 'projects' %}" class="btn btn-primary" style="background-color: green; border-color: green;">
            <i class="fas fa-arrow-left"></i> Back
        </a>
    </div>
{% endblock %}





