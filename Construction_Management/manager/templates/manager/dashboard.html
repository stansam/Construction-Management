{%extends 'manager/layout.html'%}
{%block body%}

    
    
    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h2">Dashboard</h1>
    </div>

    
    <h5>Material Inventory</h5>
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Material Name</th>
                <th>Quantity (units)</th>
            </tr>
        </thead>
        <tbody>
            {% for material in materials %}
                <tr>
                    <td>{{ material.name }}</td>
                    <td>{{ material.quantity }}</td>
                </tr>
            {% empty %}
                <tr>
                    <td colspan="2">No materials available</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div class="border-bottom">
        <h5 >On Going Projects</h5>
    </div>    
    {% for project in ongoing_projects %}
        <div class="project-card">
            <h6><strong>Project:</strong> {{forloop.counter}}</h6>
            <p><strong>Title:</strong>{{ project.title }}</p>
            <p><strong>Start Date:</strong> {{ project.start_date }}</p>
            <p><strong>End Date:</strong> {{ project.end_date }}</p>
            <p><strong>Budget:</strong> Kshs. {{ total_budget }}</p>
            <!-- Add other project details as needed -->
        </div>
    {% empty %}
        <p>No ongoing projects at the moment.</p>
    {% endfor %}
    <div class="border-bottom">
        <h5>Projects Lacking Materials</h5>
    </div>
    <ul>
        {% for project_data in projects_lacking_materials %}
            <li>{{ project_data.project.title }} lacks:</li>
            <ul>
                {% for lacking_material in project_data.lacking_materials %}
                    <li>{{ lacking_material.quantity_needed|floatformat:0 }} units of {{ lacking_material.name }}</li>
                {% endfor %}
            </ul>
        {%empty%}
            <li>All projects have enough materials :)</li>
        {% endfor %}
</ul>
    
{%endblock%}
        